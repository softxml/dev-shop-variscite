jQuery(document).ready(function($){function setIndexInSession(index){sessionStorage.setItem('data_index',index)}
function setCat4Session(index){sessionStorage.setItem('data_cat',index)}
function getIndexFromSession(){return sessionStorage.getItem('data_index')}
function getCat4FromSession(){return sessionStorage.getItem('data_cat')}
jQuery.ajax({type:'POST',url:'/wp-admin/admin-ajax.php',data:{action:'get_cart_count_and_dropdown'},success:function(data){jQuery('.wc-menu-item').html(data)}});jQuery.ajax({type:'POST',url:'/wp-admin/admin-ajax.php',data:{action:'vari_get_cart_items_count'},success:function(resp){var data=JSON.parse(resp);if(data.total>0){jQuery('.wc-mobile-cart-items a').append('<span class="number-of-items">'+data.total+'</span>')}}});if(jQuery('.wpcf7-form').length&&jQuery('#country_name').length){jQuery.ajax({type:'POST',url:'/wp-admin/admin-ajax.php',data:{action:'contact_form_fill_from_acf'},success:function(data){jQuery('#country_name').html(data)}})}
if(jQuery('.mc4wp-form').length){var today=new Date(),dd=String(today.getDate()).padStart(2,'0'),mm=String(today.getMonth()+1).padStart(2,'0'),yyyy=today.getFullYear(),time=today.getHours()+":"+today.getMinutes()+":"+today.getSeconds();today=yyyy+'-'+mm+'-'+dd+' '+time;jQuery('.mc4wp-form').find('input[name="PRIVACY"]').val(today)}
if(jQuery('.contact_us_form').length){var today=new Date(),dd=String(today.getDate()).padStart(2,'0'),mm=String(today.getMonth()+1).padStart(2,'0'),yyyy=today.getFullYear(),time=today.getHours()+":"+today.getMinutes();today=time+' '+dd+'/'+mm+'/'+yyyy;jQuery('.contact_us_form').find('input[name="privacy-policy[]"]').val(today)}
jQuery('.entry-content').on('click','.wc_grid_mode button',function(){var grid=jQuery(this).attr('data-grid');jQuery('.wc_grid_mode button').removeClass('active');jQuery(this).addClass('active');if(grid=='grid'){$("#content").addClass("product_grid")}else{$("#content").removeClass("product_grid")}});$('.woocommerce-cart').find('.continue_shopping a').click(function(){dataLayer.push({'event':'CartPage-Click-ContinueShopping'})});$('.woocommerce-cart').find('.product-quantity button').click(function(){if($(this).hasClass('plus')){dataLayer.push({'event':'CartPage-Click-IncreaseAmount'})}else if($(this).hasClass('minus')){dataLayer.push({'event':'CartPage-Click-DecreaseAmount'})}});$('.woocommerce-cart').find('.product-remove a').click(function(){dataLayer.push({'event':'CartPage-Click-RemoveItem'})});$('.woocommerce-cart').on('click','.quantity>.plus, .quantity>.minus',function(){var $qty=$(this).closest('.quantity').find('.qty'),currentVal=parseFloat($qty.val()),max=parseFloat($qty.attr('max')),min=parseFloat($qty.attr('min')),step=$qty.attr('step');if(!currentVal||currentVal===''||currentVal==='NaN')currentVal=0;if(max===''||max==='NaN')max='';if(min===''||min==='NaN')min=0;if(step==='any'||step===''||step===undefined||parseFloat(step)==='NaN')step=1;if($(this).is('.plus')){if(max&&(max==currentVal||currentVal>max)){$qty.val(max)}else{$qty.val(currentVal+parseFloat(step))}}else{if(min&&(min==currentVal||currentVal<min)){$qty.val(min)}else if(currentVal>0){$qty.val(currentVal-parseFloat(step))}
var td=$(this).parent().parent().prev();console.log($(this).next().val());var sku=td.attr('data-sku');console.log('sku',sku);var variant='';if(sku.indexOf('STK')!=-1){variant='Starter kit'}
if(sku.indexOf('DVK')!=-1){variant='Development kit'}
var curr=td.attr('data-curr');var price=td.attr('data-price');var type=td.attr('data-type');var index=td.attr('data-index');var cat4=td.attr('data-cat');var system='';var som='';var kit='';var name=td.find('a').text();var item_type='';som=td.attr('data-pa_som');if(type=='kit'){item_type='Evaluation Kits';system=td.attr('data-pa_system');kit=td.attr('data-pa_kit')}else if(type=='accessory'){item_type="accessory"}else{item_type="System on Module"}
dataLayer.push({ecommerce:null});dataLayer.push({"event":"remove_from_cart","ecommerce":{"currency":curr,"items":[{"item_id":sku,"item_name":name,"price":price,"item_type":item_type,"item_variant":variant,"item_category":som,"item_category2":system,"item_category4":cat4,"item_category5":"","quantity":1,"index":index}]}})}
$qty.trigger('change')});jQuery('div.woocommerce').on('click','.update_cart_trigger',function(){jQuery("[name='update_cart']").trigger("click")});$('#dismiss, .overlay').on('click',function(){$('#left-sidebar').removeClass('active');$('.overlay').removeClass('active')});$('.mobile_filter_icon').on('click',function(){$('#left-sidebar').addClass('active');$('.overlay').addClass('active')});var variation_top_offset;$(document).on('change','.variation-radios input',function(){$('select[name="'+$(this).attr('name')+'"]').val($(this).val()).trigger('change');$(this).parents('.value').siblings('.label').addClass('visited-item');if(jQuery(this).parents('.variation-radios.pa_kit').length){var product_ids=$(this).attr('data-accessories');if(product_ids!==''){if($('label[for="pa_operating-system"]').parents('.label').hasClass('visited')||$('label[for="pa_operating-system"]').parents('.label').hasClass('current')){$('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_operating-system').show();$('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories').addClass('visited')}
$('.entry-content > .product').addClass('kit-has-accessories');change_product_accessories_view(product_ids)}else{$('.entry-content > .product').removeClass('kit-has-accessories');$('.product_cat-evaluation-kit .product_accessories').html('');$('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_operating-system').hide()}
var option=$('#pa_kit').val();if(option!==''){$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr .label').removeClass('current');jQuery('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_kit').parents('tr').find('.label').addClass('visited');$('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories .accessories_header_wrap').removeClass('current');$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr:nth-child(2) .label').addClass('current');dataLayer.push({'event':'KitPageFunnel-1-ClickNext'})}}else if(jQuery(this).parents('.variation-radios.pa_som-configuration').length){var option=$('#pa_som-configuration').val();if(option!==''){$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr .label').removeClass('current');$('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories .accessories_header_wrap').removeClass('current');jQuery('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_som-configuration').parents('tr').find('.label').addClass('visited');$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr:nth-child(3) .label').addClass('current');dataLayer.push({'event':'KitPageFunnel-2-ClickNext'})}}else if(jQuery(this).parents('.variation-radios.pa_operating-system').length){var option=$('#pa_operating-system').val();if(option!==''){$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr .label').removeClass('current');$('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories .accessories_header_wrap').addClass('current');jQuery('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_operating-system').parents('tr').find('.label').addClass('visited');jQuery('.accessories_header_wrap').addClass('visited');variation_top_offset=$(".single-product .product_cat-evaluation-kit form.variations_form .product_accessories .accessories_header_wrap").offset().top;if(jQuery(window).width()>990){variation_top_offset-=$('#site-navigation').outerHeight();if(jQuery('body').hasClass('admin-bar')){variation_top_offset-=jQuery('#wpadminbar').outerHeight()}}
$('body, html').animate({scrollTop:variation_top_offset-24},1000);$('.entry-content > .product').addClass('kit-accessories-view');$('.entry-content > .product').find('.single_add_to_cart_button').removeClass('wc-variation-selection-needed');dataLayer.push({'event':'KitPageFunnel-3-ClickNext'})}}
if($(this).parents('tr').next('tr').length){variation_top_offset=$(this).parents('tr').next('tr').offset().top;if(jQuery(window).width()>990){variation_top_offset-=$('#site-navigation').outerHeight();if(jQuery('body').hasClass('admin-bar')){variation_top_offset-=jQuery('#wpadminbar').outerHeight()}}
$('body, html').animate({scrollTop:variation_top_offset-24},1000)}
if(jQuery(this).is(':checked')){console.log('checked');jQuery(this).parents('.value').find('.next_button').show()}});if($('.single-product .product_cat-evaluation-kit .product_accessories').hasClass('visited')){var accessories=$('.product_cat-evaluation-kit .variations .variation-radios.pa_kit input[type="radio"]:checked').attr('data-accessories');if(accessories!==''){if($('label[for="pa_operating-system"]').parents('.label').hasClass('visited')||$('label[for="pa_operating-system"]').parents('.label').hasClass('current')){$('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_operating-system').show();$('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories').addClass('visited')}
change_product_accessories_view(accessories)}else{$('.product_cat-evaluation-kit .product_accessories').html('');$('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_operating-system').hide()}}
var variation_top_offset;jQuery('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_kit .next_button,'+'.single-product .product_cat-evaluation-kit form.variations_form .variations tr:nth-child(2) .label').click(function(){var option=$('#pa_kit').val();if(option!==''){$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr .label').removeClass('current');jQuery('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_kit').parents('tr').find('.label').addClass('visited');$('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories .accessories_header_wrap').removeClass('current');$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr:nth-child(2) .label').addClass('current');variation_top_offset=$(".single-product .product_cat-evaluation-kit form.variations_form .variations tr:nth-child(2)").offset().top;if(jQuery(window).width()>990){variation_top_offset-=$('#site-navigation').outerHeight();if(jQuery('body').hasClass('admin-bar')){variation_top_offset-=jQuery('#wpadminbar').outerHeight()}}
$('html, body').animate({scrollTop:variation_top_offset-24},1000);dataLayer.push({'event':'KitPageFunnel-1-ClickNext'})}});jQuery('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_som-configuration .next_button,'+'.single-product .product_cat-evaluation-kit form.variations_form .variations tr:nth-child(3) .label').click(function(){var option=$('#pa_som-configuration').val();if(option!==''){$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr .label').removeClass('current');$('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories .accessories_header_wrap').removeClass('current');jQuery('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_som-configuration').parents('tr').find('.label').addClass('visited');$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr:nth-child(3) .label').addClass('current');variation_top_offset=$(".single-product .product_cat-evaluation-kit form.variations_form .variations tr:nth-child(3)").offset().top;if(jQuery(window).width()>990){variation_top_offset-=$('#site-navigation').outerHeight();if(jQuery('body').hasClass('admin-bar')){variation_top_offset-=jQuery('#wpadminbar').outerHeight()}}
$('body, html').animate({scrollTop:variation_top_offset-24},1000);dataLayer.push({'event':'KitPageFunnel-2-ClickNext'})}});jQuery('.single-product .product_cat-evaluation-kit form.variations_form .variations tr:first-child ').on('click','.label',function(){$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr .label').removeClass('current');$('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories .accessories_header_wrap').removeClass('current');$(this).addClass('current');variation_top_offset=$(this).offset().top;if(jQuery(window).width()>990){variation_top_offset-=$('#site-navigation').outerHeight();if(jQuery('body').hasClass('admin-bar')){variation_top_offset-=jQuery('#wpadminbar').outerHeight()}}
$('body, html').animate({scrollTop:variation_top_offset-24},1000)});jQuery('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories').on('change','.accessory-attributes input[type="radio"]',function(){var accessory_checkbox=jQuery(this).parents('.accessories_product_item').find('.custom_product_accessory'),product_id=accessory_checkbox.attr('data-product-id');accessory_checkbox.val(product_id+','+jQuery(this).val()+','+jQuery(this).attr('name'))});jQuery('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories ').on('click','.accessories_header_wrap',function(){var option=$('#pa_operating-system').val();if(option!==''){$('.single-product .product_cat-evaluation-kit form.variations_form .variations tr .label').removeClass('current');$(this).addClass('current');variation_top_offset=$(this).offset().top;if(jQuery(window).width()>990){variation_top_offset-=$('#site-navigation').outerHeight();if(jQuery('body').hasClass('admin-bar')){variation_top_offset-=jQuery('#wpadminbar').outerHeight()}}
$('body, html').animate({scrollTop:variation_top_offset-24},1000)}});$('.product_cat-evaluation-kit .single_add_to_cart_button').click(function(){dataLayer.push({'event':'KitPageFunnel-4-AddToCart'})});$('.single_add_to_cart_button').click(function(){display_loader($(this))});$('.product_cat-evaluation-kit').find('.variation-radios.pa_kit').find('input[type="radio"]').change(function(){dataLayer.push({'event':'KitPageFunnel-Click-ChooseKit'})});$('.product_cat-evaluation-kit').find('.variation-radios.pa_som-configuration').find('input[type="radio"]').change(function(){dataLayer.push({'event':'KitPageFunnel-Click-ChooseSom'})});$('.product_cat-evaluation-kit').find('.variation-radios.pa_operating-system').find('input[type="radio"]').change(function(){dataLayer.push({'event':'KitPageFunnel-Click-OperatingSystem'})});$('.product_cat-evaluation-kit').find('.product_accessories').on('change','input[type="checkbox"]',function(){dataLayer.push({'event':'KitPageFunnel-Click-ChooseAccessory'})});var accessories=$('.product_cat-evaluation-kit .variations .variation-radios.pa_kit input[type="radio"]:checked').attr('data-accessories');if(accessories!==''){if($('label[for="pa_operating-system"]').parents('.label').hasClass('visited')||$('label[for="pa_operating-system"]').parents('.label').hasClass('current')){$('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_operating-system').show();$('.single-product .product_cat-evaluation-kit form.variations_form .product_accessories').addClass('visited')}
change_product_accessories_view(accessories)}else{$('.product_cat-evaluation-kit .product_accessories').html('');$('.product_cat-evaluation-kit .evaluation_kit_next_step.pa_operating-system').hide()}
function change_product_accessories_view(attr){var data={product_accessories:attr,action:'product_accessories'};jQuery.post('/wp-admin/admin-ajax.php',data,function(result){jQuery('.product_accessories').html(result.products)})}
$('.product_cat-evaluation-kit .kit_gallery').slick({slidesToShow:1,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:9000,settings:"unslick"},{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1}}]});if($('.product').hasClass('product_cat-evaluation-kit')){jQuery('.single_variation_wrap').on('show_variation',function(event,variation){var price_wrapper=$('.single_variation_wrap').find('.woocommerce-Price-amount'),currency_wrapper=price_wrapper.find('.woocommerce-Price-currencySymbol'),currency=currency_wrapper.text(),original_price=parseFloat(price_wrapper.text().replace(currency,''));jQuery('.variations_form').attr('data-naked-price',original_price)});jQuery('.product_accessories').on('change','input[type="checkbox"]',function(){var original_price=parseFloat(jQuery('.variations_form').attr('data-naked-price')),accessories_price=0,price_wrapper,product_price_wrapper=$('.single_variation_wrap').find('.woocommerce-Price-amount'),currency_wrapper=product_price_wrapper.find('.woocommerce-Price-currencySymbol'),currency=currency_wrapper.text(),variation_price;jQuery('.product_accessories').find('.accessories_product_item').each(function(){if(jQuery(this).find('input[type="checkbox"]').is(':checked')){price_wrapper=jQuery(this).find('.amount');variation_price=parseFloat(price_wrapper.text().replace(currency,''));accessories_price+=variation_price}});$('.single_variation_wrap').find('.woocommerce-Price-amount').html('<span class="woocommerce-Price-currencySymbol">'+currency+'</span>'+String(parseFloat(Math.round((accessories_price+original_price)*100)/100).toFixed(2)))})}
$('.product-type-simple').find('form.cart').submit(function(){dataLayer.push({'event':'AccessoryPage-Click-AddToCart'})});jQuery('.product_cat-evaluation-kit .kit_gallery').on('click','.image_container',function(){var src=$(this).find('.gray_background').attr('data-image-src');var html='<img src="'+src+'">';$('.kit_modal_popup').find('.modal-body').html(html);$('.kit_modal_popup').modal('show')});jQuery('.woocommerce-checkout').find('#estimated_product_quantities input[type="radio"]').change(function(){dataLayer.push({'event':'CheckoutPage-Click-EstimatedProductionQuantities'})});jQuery('.woocommerce-checkout').find('form.checkout').submit(function(){dataLayer.push({'event':'CheckoutPage-Click-ProceedToPayment'})});jQuery('#woocommerce_promo_code').submit(function(e){e.preventDefault();var code=jQuery(this).val();if(code&&code.length>0){apply_the_coupon(code)}});jQuery('#woocommerce_promo_code').find('button').click(function(e){e.preventDefault();var code=jQuery('#promo_code').val();if(code&&code.length>0){apply_the_coupon(code)}});function apply_the_coupon(code){var data={action:'apply_cart_coupon_code',code:code};jQuery('#woocommerce_promo_code').find('.woocommerce-input-wrapper').find('span.error').remove();jQuery('#woocommerce_promo_code').find('.form-row.promo-code').removeClass('woocommerce-invalid');jQuery.post('/wp-admin/admin-ajax.php',data,function(data){var resp=jQuery.parseJSON(data);if(resp.is_valid){jQuery('body').trigger('update_checkout')}else{jQuery('#woocommerce_promo_code').find('.form-row.promo-code').removeClass('woocommerce-validated').addClass('woocommerce-invalid');jQuery('#woocommerce_promo_code').find('.woocommerce-input-wrapper').append('<span class="error">'+resp.error+'</span>')}})}
if(jQuery('#order_review').length){checkoutStickyTable();jQuery(window).resize(function(){checkoutStickyTable()})}
function checkoutStickyTable(){if(jQuery(window).width()>1600){if(!jQuery('#order_review').hasClass('is_stuck')){jQuery('#order_review').stick_in_parent({offset_top:jQuery('#site-navigation').outerHeight()})}}else{if(jQuery('#order_review').hasClass('is_stuck')){jQuery('#order_review').trigger('sticky_kit:detach')}}}
jQuery(document).on('focus','.contact_us_page .vari-contact-form input, .contact_us_page .vari-contact-form textarea',function(){jQuery(".contact_us_form label[for='"+this.id+"']").addClass("labelmoveinfocus")});jQuery(document).on('blur','.contact_us_page .vari-contact-form input, .contact_us_page .vari-contact-form textarea',function(){if(jQuery(this).val()==''){jQuery(".contact_us_form label[for='"+this.id+"']").removeClass("labelmoveinfocus")}});jQuery('.wpcf7').on('wpcf7mailsent',function(e){var formid=e.detail.contactFormId;if(formid==9032){dataLayer.push({'event':'form-shop-contactUs-success'});window.location.href='/thank-you-for-contacting-us/'}});jQuery(document).ready(function(){if(jQuery('body').hasClass('page-id-441')&&jQuery(window).width()<990){jQuery('html, body').animate({scrollTop:jQuery('.contact_us_form').offset().top},500)}});$('.is-sending').removeClass('is-sending');$(window).bind("pageshow",function(event){if(event.originalEvent.persisted){$('.is-sending').removeClass('is-sending')}});jQuery(function($){$('.bottom-language-switcher').on('click',function(){$(this).toggleClass('open')});if($('li.btn-filter').siblings().size()>0){$('li.btn-filter').addClass('col-md-6')}else{$('li.btn-filter').removeClass('col-md-6')}});jQuery('.single_add_to_cart_button').removeClass('is-sending');jQuery('.single_add_to_cart_button').on('click',function(){var index=getIndexFromSession();var form=jQuery(this).parents('form'),var_id=form.find('[name="variation_id"]').val();window.dataLayer=window.dataLayer||[];if(product_config.vars&&Object.keys(product_config.vars).length==0&&(!$('.variation-radios').hasClass('pa_kit'))){dataLayer.push({ecommerce:null});dataLayer.push({"event":"add_to_cart","ecommerce":{"currency":$('#som_curr').val(),"items":[{"item_id":$('#som_sku').val(),"item_name":product_config.name,"price":product_config.price,"item_type":product_config.type,"item_variant":"","item_category":$('.variation_item input').val(),"item_category2":"","item_category4":"","item_category5":"","quantity":1,"index":index}]}});console.log(dataLayer);form.submit()}else{if(!$(this).hasClass("disabled")&&!$(this).hasClass("wc-variation-selection-needed")){var $_this=$(this).parent().parent().parent();var index=getIndexFromSession();var accessories='no';var accessories_name='';if($('.custom_product_accessory').is(":checked")){accessories='yes';accessories_name=$('.custom_product_accessory').attr('data-name')}
var product_id=$_this.attr('data-product_id');var pa_kit=$('#pa_kit').find(":selected").val();var pa_som_configuration=$('#pa_som-configuration').find(":selected").val();var pa_operating_system=$('#pa_operating-system').find(":selected").val();if($('.variation-radios').hasClass('pa_kit')){console.log('cart');jQuery.ajax({type:"post",dataType:"json",url:'/wp-admin/admin-ajax.php',data:{action:"get_var_id",product_id:product_id,pa_kit:pa_kit,pa_som_configuration:pa_som_configuration,accessories:accessories,pa_operating_system:pa_operating_system},success:function(response){if(response.data.errors){alert("הייתה בעיה בשליחת הסיסמה")}
if(response.success){console.log(response.data.name);dataLayer.push({ecommerce:null});dataLayer.push({"event":"add_to_cart","ecommerce":{"currency":response.data.curr,"items":[{"item_id":response.data.sku,"item_name":response.data.name,"price":response.data.price,"item_type":response.data.type,"item_variant":response.data.variant,"item_category":pa_som_configuration,"item_category2":pa_operating_system,"item_category4":accessories,"item_category5":'',"quantity":1,"index":index}]}});console.log('dataLayer',dataLayer);setIndexInSession(index);setTimeout(function(){},500)}}})}}}
setTimeout(function(){jQuery('.is-sending').removeClass('is-sending')},3000)});$("body").on("keyup",".woocommerce-checkout input.input-text,.woocommerce-checkout input.input-radio",function(){var input_name=$(this).attr('name');var input_val=$(this).val();document.cookie=input_name+"="+input_val+"; expires=0; path=/"});$("body").on("change",".woocommerce-checkout select",function(){var input_name=$(this).attr('name');var input_val=$(this).val();document.cookie=input_name+"="+input_val+"; expires=0; path=/"})});function display_loader(element){element.addClass('is-sending')}(function($){$(document).ready(function(){$('#primary-menu .menu-item').on('click',function(){console.log($(this).text());dataLayer.push({'event':'menu_shop','label_event':$(this).text()});console.log(JSON.stringify(dataLayer))});$('.inside-left-sidebar .menu-item').on('click',function(){console.log($(this).text());dataLayer.push({'event':'filter_cpu','label_event':$(this).text()})});if($('body').hasClass('post-type-archive-product')){console.log('archive');var itemsArray=[];dataLayer.push({ecommerce:null});var i=1;$('.archive .products .add_to_cart_button').each(function(){var name=$(this).attr("data-name");var price=$(this).attr("data-price");var type=$(this).attr("data-type");$(this).attr('data-index',i);itemsArray.push({item_name:name,price:price,item_type:type,index:i});i++});dataLayer.push({event:"view_item_list",ecommerce:{items:itemsArray}});console.log(JSON.stringify(dataLayer))}
$('.archive .add_to_cart_button').on('click',function(){var name=$(this).attr("data-name");var price=$(this).attr("data-price");var type=$(this).attr("data-type");var i=$(this).attr("data-index");dataLayer.push({ecommerce:null});dataLayer.push({"event":"select_item","ecommerce":{"items":[{"item_name":name,"price":price,"item_type":type,"index":i}],}});console.log(JSON.stringify(dataLayer));setIndexInSession(i)});if($('body').hasClass('single-product')){var index=getIndexFromSession();var title=$('.product_title').text();var type=$('#item_type').val();var price=$('#item_price').val();dataLayer.push({ecommerce:null});dataLayer.push({"event":" view_item","ecommerce":{"items":[{"item_name":title,"price":price,"item_type":type,"index":index}],}})}
$('.product_specification_link').on('click',function(){var title=$('h1.product_title.entry-title').text();if($(this).text()=='Kit Specifications'){dataLayer.push({'event':'product_page','label_event':'Kit Specifications','item_name':title})}else{dataLayer.push({'event':'product_page','label_event':'SOM Specifications','item_name':title})}
console.log(JSON.stringify(dataLayer))});if($('body').hasClass('woocommerce-cart')){var itemsArray=[];var curr='';var index=getIndexFromSession();dataLayer.push({ecommerce:null});$('td.product-name').each(function(){var qty=$(this).parent().find('.qty');var sku=$(this).attr('data-sku');console.log('sku',sku);var variant='';if(sku.indexOf('STK')!=-1){variant='Starter kit'}
if(sku.indexOf('DVK')!=-1){variant='Development kit'}
curr=$(this).attr('data-curr');var price=$(this).attr('data-price');var type=$(this).attr('data-type');var index=$(this).attr('data-index');var cat4=$(this).attr('data-cat');var system='';var som='';var kit='';var name=$(this).find('a').text();var item_type='';som=$(this).attr('data-pa_som');if(type=='kit'){item_type='Evaluation Kits';system=$(this).attr('data-pa_system');kit=$(this).attr('data-pa_kit')}else if(type=='accessory'){item_type="accessory"}else{item_type="System on Module"}
var qtyy=qty.val();itemsArray.push({"item_id":sku,"item_name":name,"price":price,"item_type":item_type,"item_variant":variant,"item_category":som,"item_category2":system,"item_category4":cat4,"item_category5":"","quantity":qtyy,"index":index})});dataLayer.push({"event":"view_cart","ecommerce":{"currency":curr,"items":itemsArray}});console.log(dataLayer)}
if($('body').hasClass('woocommerce-checkout')){var itemsArray=[];var curr='';dataLayer.push({ecommerce:null});$('td.product-name').each(function(){var qty=$(this).find('.product-quantity').text();qtyy=$.trim(qty);var sku=$(this).attr('data-sku');console.log('sku',sku);var variant='';if(sku.indexOf('STK')!=-1){variant='Starter kit'}
if(sku.indexOf('DVK')!=-1){variant='Development kit'}
curr=$(this).attr('data-curr');var price=$(this).attr('data-price');var type=$(this).attr('data-type');var index=$(this).attr('data-index');var cat4=$(this).attr('data-cat');var system='';var som='';var kit='';var name=$(this).attr('data-name');var item_type='';som=$(this).attr('data-pa_som');if(type=='kit'){item_type='Evaluation Kits';system=$(this).attr('data-pa_system');kit=$(this).attr('data-pa_kit')}else if(type=='accessory'){item_type="accessory"}else{item_type="System on Module"}
itemsArray.push({"item_id":sku,"item_name":name,"price":price,"item_type":item_type,"item_variant":variant,"item_category":som,"item_category2":system,"item_category4":cat4,"item_category5":"","quantity":qtyy,"index":index})});dataLayer.push({"event":"begin_checkout","ecommerce":{"currency":curr,"items":itemsArray}});console.log(dataLayer)}
$('body').on('click','#cart_button',function(e){dataLayer.push({"event":"cart_popup","event_category":"cart_popup","event_action":"click","event_label":"cart",});console.log(JSON.stringify(dataLayer))});$('body').on('click','#check_button',function(e){dataLayer.push({"event":"cart_popup","event_category":"cart_popup","event_action":"click","event_label":"checkout",});console.log(JSON.stringify(dataLayer))});$('.woocommerce-cart').find('.product-remove a').click(function(){dataLayer.push({'event':'CartPage-Click-RemoveItem'});var td=$(this).parent().parent().find('.product-name');var qty=$(this).parent().parent().find('.qty');console.log('qty',qty.val());console.log('td',td);var sku=td.attr('data-sku');console.log('sku',sku);var variant='';if(sku.indexOf('STK')!=-1){variant='Starter kit'}
if(sku.indexOf('DVK')!=-1){variant='Development kit'}
var curr=td.attr('data-curr');var price=td.attr('data-price');var type=td.attr('data-type');var index=td.attr('data-index');var cat4=td.attr('data-cat');var system='';var som='';var kit='';var name=td.find('a').text();var item_type='';som=td.attr('data-pa_som');if(type=='kit'){item_type='Evaluation Kits';system=td.attr('data-pa_system');kit=td.attr('data-pa_kit')}else if(type=='accessory'){item_type="accessory"}else{item_type="System on Module"}
var qty=qty.val();dataLayer.push({ecommerce:null});dataLayer.push({"event":"remove_from_cart","ecommerce":{"currency":curr,"items":[{"item_id":sku,"item_name":name,"price":price,"item_type":item_type,"item_variant":variant,"item_category":som,"item_category2":system,"item_category4":cat4,"item_category5":"","quantity":qty,"index":index}]}});console.log(dataLayer)})});function setIndexInSession(index){sessionStorage.setItem('data_index',index)}
function setCat4Session(index){sessionStorage.setItem('data_cat',index)}
function getIndexFromSession(){return sessionStorage.getItem('data_index')}
function getCat4FromSession(){return sessionStorage.getItem('data_cat')}})(jQuery)